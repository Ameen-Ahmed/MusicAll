# Song2Search

This is a Node.js, Angular 6, and Express web application that allows users to search for music across multiple media streaming platforms. 

## Supported APIs

The platforms supported by this application, along with their corresponding APIs, are as follows:
- **Spotify**: https://developer.spotify.com/documentation/web-api/
- **Youtube**: https://developers.google.com/youtube/v3/
- **iTunes**: https://affiliate.itunes.apple.com/resources/documentation/itunes-store-web-service-search-api/
- **Audiomack**: https://www.audiomack.com/data-api/docs
- **SoundCloud**: This API is currently unavailable to new applications. Instead, this project uses headless Chromium through the Puppeteer package to search the SoundCloud library. https://www.npmjs.com/package/puppeteer



## Getting Started

To install dependencies for the project begin with the following:
```bash
npm install
```

To start the Express backend server on Port 3000, and the Angular application frontend on Port 4200, enter the following
(Note: Due to the nature of each command, they may need to be executed each in their own terminal instances):
```bash
npm start
npm run serve
```

## REST API

The routes for backend REST API, which is used for retrieving data from each media platform, are as follows:
- POST: http://localhost:3000/api/spotify
- POST: http://localhost:3000/api/youtube
- POST: http://localhost:3000/api/itunes
- POST: http://localhost:3000/api/audiomack
- POST: http://localhost:3000/api/soundcloud


## Response Format

All responses are in the form of a JSON object. The JSON object has two keys: 'data' and 'Platform'. The value associated with 'data' is an array of JSON objects. The 'Platform' is an Object containing the name of the associated platform 

Example response when searching for Songs:
```bash
{ data:
   [ { Song: 'Miss You (with Major Lazer & Tory Lanez)',
       Artist: 'Cashmere Cat',
       Link: 'https://open.spotify.com/track/7HdZY9UJTylIiNcSDFyUDc',
       Image: 'https://i.scdn.co/image/655723fb3de4609de95c1b2140a1ddbac69a698c' },
     { Song: 'Talk To Me (with Rich The Kid)',
       Artist: 'Tory Lanez',
       Link: 'https://open.spotify.com/track/49NhxprbG9oTtMunQCSXxA',
       Image: 'https://i.scdn.co/image/569fe5acea6caf7f8ed645ced7f16777cf874400' } ],
  Platform: 'spotify' }
```

## Development

This project uses EditorConfig to standardize text editor configuration. Visit http://editorconfig.org for more details.


This project's Node.js backend uses ESLint to enforce specific JavaScript coding patterns. Visit http://eslint.org for more details.

The Angular frontend uses TSLint to enforce TypeScript specific coding patterns. Visit https://palantir.github.io/tslint/ for more details.

To perform linting on all frontend TypeScript and backend JavaScript, respectively:

```bash
npm run lint
npm run server:lint
```

### Building and Automation

To build the frontend of the project to the dist/ folder run the following command (For production, add the --prod flag):

```bash
npm run build
```

To run the server with automatic refreshing for detected changes, use the following command to execute Nodemon. Visit https://nodemon.io/ for more details

```bash
npm run server:nodemon
```

### Testing

This project's backend uses the Mocha testing framework and Chai assertion library for testing.
Visit http://mochajs.org and http://chaijs.com for details.

The frontend uses the Jasmine test framework, and Karma test runner. Visit https://jasmine.github.io/2.4/introduction.html and https://karma-runner.github.io/1.0/index.html for details

To execute tests:
```bash
npm run server:test
npm run test
```

Code coverage is generated by Istanbul. Visit http://istanbul.js.org for details.

To calculate coverage:
```bash
npm run -s server:coverage
ng test --watch=false --code-coverage
```

## Credits

This README, along with this project's backend testing suite, is based on files from Josh Peck's lynda.com course "Node.js: Testing and Code Quality"
